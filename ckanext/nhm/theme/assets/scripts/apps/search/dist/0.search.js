(window.webpackJsonpsearch=window.webpackJsonpsearch||[]).push([[0],{690:function(e,t,a){var n=a(304),r=a(693);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var s={insert:"head",singleton:!1};n(r,s);e.exports=r.locals||{}},692:function(e,t,a){"use strict";a(690)},693:function(e,t,a){(t=a(305)(!1)).push([e.i,"\ninput[data-v-2af18a9c], select[data-v-2af18a9c] {\n    margin: 2px;\n}\n#radius[data-v-2af18a9c] {\n    width: 45px;\n}\n#mapdisplay[data-v-2af18a9c] {\n    height: 200px;\n    width: 100%;\n    margin-top: 5px;\n}\nsmall[data-v-2af18a9c] {\n    text-align: left;\n    padding-right: 10px;\n}\n",""]),e.exports=t},694:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"term-editor floating flex-container flex-smallwrap flex-stretch-height"},[t("i",{staticClass:"fas fa-caret-square-left",attrs:{role:"button"},on:{click:e.closeDialog}}),e._v(" "),"geo"===e.fieldType?e._e():t("div",{staticClass:"term-editor-fields space-children-v"},[t("div",{staticClass:"flex-container flex-wrap flex-wrap-spacing"},e._l(e.newFields,(function(a,n){return t("span",{key:a.id,staticClass:"fields"},[e._v("\n                            "+e._s(a)+"\n                            "),t("i",{staticClass:"delete-field fas fa-times-circle fa-xs",on:{click:function(){return e.deleteField(n)}}})])})),0),e._v(" "),t("FieldPicker",{attrs:{callback:e.addNewField,"resource-ids":e.resourceIds}})],1),e._v(" "),t("div",{staticClass:"term-editor-query space-children-v"},[t("div",{staticClass:"flex-container flex-nowrap flex-stretch-last"},[t("span",[e._v("As:")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.fieldType,expression:"fieldType"}],attrs:{title:"Select what type to treat the field's contents as"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.fieldType=t.target.multiple?a:a[0]},function(){e.comparisonType=e.schema.terms[e.fieldType][0]}]}},e._l(e.readableFieldTypes,(function(a,n){return t("option",{key:a.id,domProps:{value:n}},[e._v(e._s(a)+"\n            ")])})),0)]),e._v(" "),t("div",{staticClass:"comparison-types flex-container flex-center"},e._l(e.terms,(function(a){return t("span",{key:a.id},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.comparisonType,expression:"comparisonType"}],attrs:{type:"radio",id:a,name:"comparisonType",checked:""},domProps:{value:a,checked:e._q(e.comparisonType,a)},on:{change:function(){e.comparisonType=a}}}),e._v(" "),t("label",{attrs:{for:a}},[e._v(e._s(a))])])})),0),e._v(" "),t("div",{staticClass:"query-values"},[t("keep-alive",[t(e.fieldType,{tag:"component",attrs:{"comparison-type":e.comparisonType,"existing-term-id":e.existingTermId},on:{"set-query-values":e.setQueryValues}})],1)],1),e._v(" "),t("div",{staticClass:"flex-container flex-column flex-stretch-height"},[t("span",[t("label",{attrs:{for:"termNameInput"}},[e._v("Name (optional)")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.termName,expression:"termName"}],attrs:{id:"termNameInput",type:"text"},domProps:{value:e.termName},on:{input:function(t){t.target.composing||(e.termName=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"query-submit"},[t("button",{staticClass:"btn btn-primary no-icon",on:{click:e.submitTerm}},[e._v("Save")])])])])};n._withStripped=!0;var r=a(18),s=a(4),i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex-container flex-center"},[t("span",{staticClass:"fields"},[e._v("\n                    field\n                ")]),e._v(" "),t("label",{attrs:{for:"queryValueText"}},[t("i",{class:["fas","equals"===e.comparisonType?"fa-equals":"fa-search"]})]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.values[e.comparisonType].value,expression:"values[comparisonType].value"}],attrs:{type:"text",id:"queryValueText",size:"10"},domProps:{value:e.values[e.comparisonType].value},on:{input:function(t){t.target.composing||e.$set(e.values[e.comparisonType],"value",t.target.value)}}})])};i._withStripped=!0;var o=function(){return(0,this._self._c)("div")};function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t,a=1;a<arguments.length;a++)t=null==arguments[a]?{}:arguments[a],a%2?l(Object(t),!0).forEach((function(a){c(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}));return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}o._withStripped=!0;var p={name:"BaseEditor",props:["comparisonType","existingTermId"],data:function(){return{values:{}}},computed:u(u({},Object(s.c)("results/query/filters",["getFilterById"])),{},{queryValues:function(){return this.values[this.comparisonType]}}),created:function(){this.loadExisting()},methods:{loadExisting:function(){var e=this;if(void 0!==this.existingTermId){var t=this.getFilterById(this.existingTermId);r.b(this.values[this.comparisonType]).forEach((function(a){e.$set(e.values[e.comparisonType],a,t.content[a]||null)}))}}},watch:{values:{handler:function(){this.$emit("set-query-values",this.queryValues)},deep:!0}}},d=a(5),v=Object(d.a)(p,o,[],!1,null,null,null).exports,m={extends:v,name:"TextEditor",data:function(){return{values:{equals:{value:null},contains:{value:null}}}}},f=Object(d.a)(m,i,[],!1,null,null,null).exports,h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex-container flex-center"},["range"===e.comparisonType?t("span",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.values.range.greater_than,expression:"values.range.greater_than"}],attrs:{type:"number"},domProps:{value:e.values.range.greater_than},on:{input:function(t){t.target.composing||e.$set(e.values.range,"greater_than",t.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.values.range.greater_than_inclusive,expression:"values.range.greater_than_inclusive"}],attrs:{type:"checkbox",id:"greaterThanEq"},domProps:{checked:Array.isArray(e.values.range.greater_than_inclusive)?-1<e._i(e.values.range.greater_than_inclusive,null):e.values.range.greater_than_inclusive},on:{change:function(t){var a=e.values.range.greater_than_inclusive,n=t.target,r=!!n.checked;if(Array.isArray(a)){var s=e._i(a,null);n.checked?0>s&&e.$set(e.values.range,"greater_than_inclusive",a.concat([null])):-1<s&&e.$set(e.values.range,"greater_than_inclusive",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(e.values.range,"greater_than_inclusive",r)}}}),e._v(" "),"range"===e.comparisonType?t("label",{attrs:{for:"greaterThanEq"}},[t("i",{class:["fas","fa-less-than"+(e.values.range.greater_than_inclusive?"-equal":"")]})]):e._e()]):e._e(),e._v(" "),t("span",{staticClass:"fields"},[e._v("\n        field\n    ")]),e._v(" "),"range"===e.comparisonType?t("span",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.values.range.less_than_inclusive,expression:"values.range.less_than_inclusive"}],attrs:{type:"checkbox",id:"lessThanEq"},domProps:{checked:Array.isArray(e.values.range.less_than_inclusive)?-1<e._i(e.values.range.less_than_inclusive,null):e.values.range.less_than_inclusive},on:{change:function(t){var a=e.values.range.less_than_inclusive,n=t.target,r=!!n.checked;if(Array.isArray(a)){var s=e._i(a,null);n.checked?0>s&&e.$set(e.values.range,"less_than_inclusive",a.concat([null])):-1<s&&e.$set(e.values.range,"less_than_inclusive",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(e.values.range,"less_than_inclusive",r)}}}),e._v(" "),t("label",{attrs:{for:"lessThanEq"}},[t("i",{class:["fas","fa-less-than"+(e.values.range.less_than_inclusive?"-equal":"")]})]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.values.range.less_than,expression:"values.range.less_than"}],attrs:{type:"number"},domProps:{value:e.values.range.less_than},on:{input:function(t){t.target.composing||e.$set(e.values.range,"less_than",t.target.value)}}})]):e._e(),e._v(" "),"equals"===e.comparisonType?t("span",[e._m(0),e._v(" "),"equals"===e.comparisonType?t("input",{directives:[{name:"model",rawName:"v-model",value:e.values.equals.value,expression:"values.equals.value"}],attrs:{type:"number",id:"queryValueInt1"},domProps:{value:e.values.equals.value},on:{input:function(t){t.target.composing||e.$set(e.values.equals,"value",t.target.value)}}}):e._e()]):e._e()])};h._withStripped=!0;var g={extends:v,name:"NumberEditor",data:function(){return{values:{equals:{value:null},range:{greater_than:null,less_than:null,greater_than_inclusive:null,less_than_inclusive:null}}}},computed:{queryValues:function(){var e=this;return r.b(this.values[this.comparisonType]).forEach((function(t){var a=e.values[e.comparisonType][t];["value","less_than","greater_than"].includes(t)&&null!==e.values[e.comparisonType][t]&&e.$set(e.values[e.comparisonType],t,+a)})),this.values[this.comparisonType]}}},y=Object(d.a)(g,h,[function(){var e=this._self._c;return e("label",{attrs:{for:"queryValueInt1"}},[e("i",{staticClass:"fas fa-equals"})])}],!1,null,null,null).exports,_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex-container flex-column flex-center"},["point"===e.comparisonType?t("div",{staticClass:"flex-container flex-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.values.point.latitude,expression:"values.point.latitude"}],attrs:{type:"text",title:"Latitude",size:"3"},domProps:{value:e.values.point.latitude},on:{input:function(t){t.target.composing||e.$set(e.values.point,"latitude",t.target.value)}}}),e._v(" "),t("span",[e._v(",")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.values.point.longitude,expression:"values.point.longitude"}],attrs:{type:"text",title:"Longitude",size:"3"},domProps:{value:e.values.point.longitude},on:{input:function(t){t.target.composing||e.$set(e.values.point,"longitude",t.target.value)}}}),e._v(" "),t("label",{attrs:{for:"radius"}},[e._v("Â±")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.values.point.radius,expression:"values.point.radius"}],attrs:{type:"number",title:"Radius",min:"0",id:"radius"},domProps:{value:e.values.point.radius},on:{input:function(t){t.target.composing||e.$set(e.values.point,"radius",t.target.value)}}}),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.values.point.radius_unit,expression:"values.point.radius_unit"}],attrs:{title:"Radius units"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.values.point,"radius_unit",t.target.multiple?a:a[0])}}},e._l(e.radiusUnits,(function(a){return t("option",{key:a.id},[e._v(e._s(a)+"\n            ")])})),0)]):e._e(),e._v(" "),"named_area"===e.comparisonType?t("div",{staticClass:"flex-container flex-center flex-column"},[t("span",[t("label",{attrs:{for:"geoCategory"}},[e._v("Category")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.geoCategory,expression:"geoCategory"}],attrs:{id:"geoCategory"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.geoCategory=t.target.multiple?a:a[0]}}},e._l(e.namedAreas,(function(a,n){return t("option",{key:n.id},[e._v(e._s(n)+"\n                ")])})),0)]),e._v(" "),t("span",[t("label",{attrs:{for:"geoName"}},[e._v("Name")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.values.named_area[e.geoCategory],expression:"values.named_area[geoCategory]"}],attrs:{id:"geoName",disabled:!e.geoCategory},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.values.named_area,e.geoCategory,t.target.multiple?a:a[0])}}},e._l(e.namedAreas[e.geoCategory]||[],(function(a){return t("option",{key:a.id},[e._v("\n                    "+e._s(a)+"\n                ")])})),0)])]):e._e(),e._v(" "),"custom_area"===e.comparisonType?t("div",{staticClass:"flex-container flex-center flex-column flex-stretch-height space-children-v full-width"},[t("div",{staticClass:"flex-container flex-wrap flex-wrap-spacing"},[e._l(e.values.custom_area,(function(a,n){return t("span",{key:a.id,staticClass:"fields"},[e._v("\n                "+e._s(a.map((function(e){return e.length})).reduce((function(e,t){return e+t}),0))+" points\n                "),t("i",{staticClass:"delete-field fas fa-times-circle fa-xs",on:{click:function(){return e.deletePolygon(n)}}})])})),e._v(" "),t("i",{staticClass:"fas fa-plus-square",attrs:{title:"Add new polygon",role:"button"},on:{click:e.addPolygon}})],2),e._v(" "),t("div",{staticClass:"flex-container"},[e._m(0),e._v(" "),t("label",{attrs:{for:"useGeoJson"}},[e._v("Paste GeoJSON")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.useGeoJson,expression:"useGeoJson"}],attrs:{type:"checkbox",id:"useGeoJson"},domProps:{checked:Array.isArray(e.useGeoJson)?-1<e._i(e.useGeoJson,null):e.useGeoJson},on:{change:function(t){var a=e.useGeoJson,n=t.target,r=!!n.checked;if(Array.isArray(a)){var s=e._i(a,null);n.checked?0>s&&(e.useGeoJson=a.concat([null])):-1<s&&(e.useGeoJson=a.slice(0,s).concat(a.slice(s+1)))}else e.useGeoJson=r}}})]),e._v(" "),e.useGeoJson?t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.pastedGeoJson,expression:"pastedGeoJson"}],attrs:{placeholder:"Paste a list of MultiPolygon coordinates, e.g. [[[[1, 1], [0, 0], [1, 0], [1, 1]]]]"},domProps:{value:e.pastedGeoJson},on:{input:function(t){t.target.composing||(e.pastedGeoJson=t.target.value)}}}):e._e(),e._v(" "),t("button",{staticClass:"btn btn-primary",on:{click:e.parseGeoJson}},[e._v("\n            Set\n        ")])]):e._e(),e._v(" "),"named_area"===e.comparisonType?e._e():t("div",{attrs:{id:"mapdisplay"}})])};_._withStripped=!0;var b=a(691),x=a.n(b);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t,a=1;a<arguments.length;a++)t=null==arguments[a]?{}:arguments[a],a%2?T(Object(t),!0).forEach((function(a){O(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}));return e}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k={extends:v,name:"GeoEditor",data:function(){return{values:{point:{latitude:null,longitude:null,radius:0,radius_unit:"mi"},named_area:{country:null,marine:null,geography:null},custom_area:[[]]},geoCategory:null,leafletMap:null,markers:{point:{group:x.a.layerGroup(),circle:x.a.circle(),marker:x.a.marker()},named_area:{group:x.a.layerGroup(),data:null},custom_area:{group:x.a.layerGroup()}},pastedGeoJson:null,currentPolygon:[],useGeoJson:!1,mapInitialised:!1}},computed:w(w({},Object(s.e)(["schema"])),{},{radiusUnits:function(){return this.schema.raw.definitions.term.properties.geo_point.properties.radius_unit.enum},namedAreas:function(){return r.c().key((function(e){return e.key})).rollup((function(e){return e[0].value.enum})).object(r.a(this.schema.raw.definitions.term.properties.geo_named_area.properties))},radiusMeters:function(){return{mi:function(e){return e/62137e-8},yd:function(e){return e/1.0936},ft:function(e){return e/3.2808},in:function(e){return e/39.37},km:function(e){return 1e3*e},m:function(e){return e},cm:function(e){return e/100},mm:function(e){return e/1e3},nmi:function(e){return e/53996e-8}}[this.values.point.radius_unit](this.values.point.radius)}}),methods:{loadExisting:function(){var e=this;if(void 0!==this.existingTermId){var t=this.getFilterById(this.existingTermId);"custom_area"===this.comparisonType?this.$set(this.values,"custom_area",t.content):r.b(this.values[this.comparisonType]).forEach((function(a){e.$set(e.values[e.comparisonType],a,t.content[a]||null)})),"named_area"===this.comparisonType&&(this.geoCategory=r.b(t.content).filter((function(t){return r.b(e.namedAreas).includes(t)}))[0])}},setLatLng:function(e){if("point"===this.comparisonType&&(this.$set(this.values.point,"latitude",e.latlng.lat),this.$set(this.values.point,"longitude",e.latlng.lng)),"custom_area"===this.comparisonType){if(this.useGeoJson)return;var t=[e.latlng.lng,e.latlng.lat];0===this.currentPolygon.length?(this.currentPolygon.push(t),this.currentPolygon.push(t)):this.currentPolygon.splice(this.currentPolygon.length-1,0,t),this.$set(this.values.custom_area,this.values.custom_area.length-1,[this.currentPolygon])}},resetMap:function(){var e=this;r.d(this.markers).forEach((function(t){e.leafletMap.hasLayer(t.group)&&e.leafletMap.removeLayer(t.group)})),this.markers[this.comparisonType].group.addTo(this.leafletMap),this.leafletMap.on("click",this.setLatLng)},parseGeoJson:function(){if(null!==this.pastedGeoJson){var e=[],t=!0;try{e=JSON.parse(this.pastedGeoJson)}catch(e){t=!1,console.log("Invalid JSON.")}t&&this.$set(this.values,"custom_area",e)}},setGeoJson:function(){this.markers.custom_area.group.clearLayers();try{var e={type:"MultiPolygon",coordinates:this.values.custom_area};this.markers.custom_area.group.addLayer(x.a.geoJSON(e))}catch(e){console.log(e),this.markers.custom_area.group.addLayer(x.a.popup().setLatLng(this.leafletMap.getCenter()).setContent("Invalid GeoJSON."))}},addPolygon:function(){this.pastedGeoJson=null,this.currentPolygon=[],this.values.custom_area.push([])},deletePolygon:function(e){this.$delete(this.values.custom_area,e)},initMap:function(){this.leafletMap=x.a.map("mapdisplay"),this.leafletMap.setView([0,0],0),x.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18}).addTo(this.leafletMap),this.resetMap(),this.mapInitialised=!0}},mounted:function(){"named_area"!==this.comparisonType&&this.initMap()},watch:{comparisonType:function(){"named_area"===this.comparisonType||(this.mapInitialised?this.resetMap():setTimeout(this.initMap,1e3))},"values.point":{handler:function(){var e=[this.values.point.latitude,this.values.point.longitude];return e.some((function(e){return null===e||""===e}))?void this.markers.point.group.clearLayers():(this.leafletMap.setView(e),this.markers.point.marker.setLatLng(e),!this.markers.point.group.hasLayer(this.markers.point.marker)&&this.markers.point.group.addLayer(this.markers.point.marker),void(0<this.values.point.radius?(this.markers.point.circle.setLatLng(e),this.markers.point.circle.setRadius(this.radiusMeters),!this.markers.point.group.hasLayer(this.markers.point.circle)&&this.markers.point.group.addLayer(this.markers.point.circle)):this.markers.point.group.removeLayer(this.markers.point.circle)))},deep:!0},"values.named_area":{handler:function(e){var t=this,a=r.a(e);1<a.map((function(e){return null===e.value?0:1})).reduce((function(e,t){return e+t}))&&a.forEach((function(e){t.$set(t.values.named_area,e.key,null)}))},deep:!0},"values.custom_area":{handler:function(){this.pastedGeoJson=JSON.stringify(this.values.custom_area),this.setGeoJson()},deep:!0}}},P=(a(692),Object(d.a)(k,_,[function(){var e=this,t=e._self._c;return t("small",[e._v("\n                Click on the map to add polygon points.\n                Try "),t("a",{attrs:{id:"geojson-link",href:"https://geojson.net"}},[e._v("geojson.net")]),e._v(" for editing\n                more complex MultiPolygon queries.\n            ")])}],!1,null,"2af18a9c",null).exports),j=function(){return(0,this._self._c)("div",{staticClass:"flex-container flex-center"})};j._withStripped=!0;var q={extends:v,name:"OtherEditor",data:function(){return{values:{}}}},C=Object(d.a)(q,j,[],!1,null,null,null).exports;function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function J(e){for(var t,a=1;a<arguments.length;a++)t=null==arguments[a]?{}:arguments[a],a%2?N(Object(t),!0).forEach((function(a){G(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}));return e}function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?A(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var $={name:"TermEditor",components:{FieldPicker:a(293).a,string:f,number:y,geo:P,other:C},props:["existingTermId","parentId"],data:function(){var e={newFields:[],fieldType:"string",comparisonType:"equals",termName:null,queryValues:{},readableFieldTypes:{string:"Text",number:"Number",geo:"Geo",other:"Any"}};if(void 0!==this.existingTermId){var t=this.$store.getters["results/query/filters/getFilterById"](this.existingTermId);e.newFields=I(t.content.fields||[]),e.fieldType=t.key.includes("_")?t.key.split("_")[0]:"other",e.comparisonType=t.key.slice(t.key.indexOf("_")+1),e.termName=t.display.name}return e},computed:J(J(J(J({},Object(s.e)(["schema"])),Object(s.e)("results/query/resources",["resourceIds"])),Object(s.c)("results/query/filters",["getFilterById"])),{},{terms:function(){var e=this.schema.terms[this.fieldType];return 1===e.length&&(""===e[0]||null===e[0])?[]:e},queryType:function(){return"other"===this.fieldType?this.comparisonType:[this.fieldType,this.comparisonType].join("_")},query:function(){var e={};return"geo"!==this.fieldType&&(e.fields=this.newFields),Array.isArray(this.queryValues)?e=this.queryValues:r.a(this.queryValues).forEach((function(t){null!==t.value&&(e[t.key]=t.value)})),e}}),methods:J(J(J({},Object(s.d)("results/query/filters",["changeKey","changeContent","changeName"])),Object(s.b)("results/query/filters",["addTerm"])),{},{setQueryValues:function(e){this.queryValues=e},addNewField:function(e){this.newFields.push(e)},deleteField:function(e){this.$delete(this.newFields,e)},closeDialog:function(){this.$parent.showEditor=!1},submitTerm:function(){void 0===this.existingTermId?this.addTerm({parent:this.parentId,key:this.queryType,content:this.query,display:{name:this.termName}}):(this.changeKey({key:this.queryType,id:this.existingTermId}),this.changeContent({content:this.query,id:this.existingTermId}),this.changeName({name:this.termName,id:this.existingTermId})),this.closeDialog()},resetQuery:function(){this.queryValues={}}}),watch:{fieldType:function(){this.resetQuery()},comparisonType:function(){this.resetQuery()}}},E=Object(d.a)($,n,[],!1,null,null,null);t.default=E.exports}}]);