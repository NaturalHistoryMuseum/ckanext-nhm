<div id="view-{{ resource_view['id'] }}" class="resource-view" data-id="{{ resource_view['id'] }}" data-title="{{ resource_view['title'] }}" data-description="{{ resource_view['descripion'] }}">
  <div class="m-top ckanext-datapreview">

    {% if not to_preview and h.resource_view_is_filterable(resource_view) %}
      {% snippet 'package/snippets/resource_view_filters.html', resource_view=resource_view, resource=resource, package=package %}
    {% endif %}

    <div class="row">

    {% if not to_preview and h.resource_view_is_filterable(resource_view) %}
      {% if h.is_datasolr_resource(resource['id']) %}
        {% set facets = h.get_resource_facets(resource) %}
      {% endif %}

      {% if facets %}
        <div class="span3">
          {% for facet in facets %}
            <section class="module module-narrow module-shallow">
            <h2 class="module-heading">
              <i class="icon-medium icon-filter"></i>
              {{ facet.name|title }}
            </h2>
            <nav>
              <ul class="unstyled nav nav-simple nav-facet">
                {% for item in facet.facet_values %}
                  <li>{{ item }}</li>
                {% endfor %}
              </ul>
            </nav>
            </section>


          {% endfor %}
        </div>

        <div class="span9">
          {% snippet 'package/snippets/resource_view_rendered.html', resource_view=resource_view, resource=resource, package=package %}
        </div>
      {% else %}
         {% snippet 'package/snippets/resource_view_rendered.html', resource_view=resource_view, resource=resource, package=package %}
      {% endif %}
    {% endif %}
    </div>
  </div>
</div>
