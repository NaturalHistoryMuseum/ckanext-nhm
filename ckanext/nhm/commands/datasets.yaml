Artefacts:
  description: Museum artefacts
  sql: "SELECT c.irn as _id, kind, name, (SELECT True from {schema}.catalogue_multimedia cm WHERE cm.catalogue_irn = c.irn LIMIT 1) as multimedia
       FROM {schema}.catalogue c
       INNER JOIN {schema}.artefact a ON a.irn = c.irn"

Botany:
  description: Palaeontological specimens
  sql: "SELECT DISTINCT ON (c.irn) c.irn as _id, c.type,
       s.collection_department, s.collection_sub_department, s.catalogue_number,
       t.scientific_name, t.kingdom, t.phylum, t.taxonomic_class, t.order, t.suborder, t.superfamily, t.family, t.subfamily, t.genus, t.subgenus, t.species, t.subspecies, t.scientific_name_author, t.scientific_name_author_year, t.currently_accepted_name,
       si.continent, si.country, si.state_province, si.county, si.decimal_latitude as latitude, si.decimal_longitude as longitude,
       ce.expedition_name, ce.vessel_name,
       (SELECT True FROM {schema}.catalogue_multimedia cm WHERE cm.catalogue_irn = c.irn LIMIT 1) AS multimedia,
       b.exsiccati, b.site_description, b.cultivated
       FROM {schema}.catalogue c INNER JOIN {schema}.specimen s on s.irn = c.irn
       LEFT JOIN {schema}.botany b on b.irn = s.irn
       LEFT JOIN {schema}.site si ON si.irn = s.site_irn
       LEFT JOIN {schema}.collection_event ce ON ce.irn = s.collection_event_irn
       LEFT JOIN tmp_determination d ON d.specimen_irn = c.irn
       LEFT JOIN {schema}.taxonomy t ON t.irn = d.taxonomy_irn
       WHERE s.collection_department = 'Botany'
       ORDER BY c.irn"

Entomology:
  description: Entomological specimens and index lots
  sql: "(SELECT DISTINCT ON (c.irn) c.irn as _id, c.type,
       s.collection_department, s.collection_sub_department, s.catalogue_number,
       t.scientific_name, t.kingdom, t.phylum, t.taxonomic_class, t.order, t.suborder, t.superfamily, t.family, t.subfamily, t.genus, t.subgenus, t.species, t.subspecies, t.scientific_name_author, t.scientific_name_author_year, t.currently_accepted_name,
       si.continent, si.country, si.state_province, si.county, si.decimal_latitude as latitude, si.decimal_longitude as longitude,
       ce.expedition_name, ce.vessel_name,
       (SELECT True FROM {schema}.catalogue_multimedia cm WHERE cm.catalogue_irn = c.irn LIMIT 1) AS multimedia,
       p.part_type
       FROM {schema}.catalogue c INNER JOIN {schema}.specimen s on s.irn = c.irn
       LEFT JOIN {schema}.part p ON p.irn = s.irn
       LEFT JOIN {schema}.site si ON si.irn = s.site_irn
       LEFT JOIN {schema}.collection_event ce ON ce.irn = s.collection_event_irn
       LEFT JOIN tmp_determination d ON d.specimen_irn = c.irn
       LEFT JOIN {schema}.taxonomy t ON t.irn = d.taxonomy_irn
       WHERE s.collection_department = 'Entomology'
       ORDER BY c.irn)
       UNION ALL
       (SELECT c.irn as _id, 'Indexlot' as type,
       'Entomology' as collection_department, NULL as collection_sub_department, NULL as catalogue_number,
       t.scientific_name, t.kingdom, t.phylum, t.taxonomic_class, t.order, t.suborder, t.superfamily, t.family, t.subfamily, t.genus, t.subgenus, t.species, t.subspecies, t.scientific_name_author, t.scientific_name_author_year, t.currently_accepted_name,
       NULL as continent, NULL as country, NULL as state_province, NULL as county, NULL as latitude, NULL as longitude,
       NULL as expedition_name, NULL as vessel_name,
       (SELECT True from {schema}.catalogue_multimedia cm WHERE cm.catalogue_irn = c.irn LIMIT 1) as multimedia,
       NULL as part_type
       FROM {schema}.catalogue c
       INNER JOIN {schema}.indexlot i ON i.irn = c.irn
       LEFT JOIN {schema}.taxonomy t ON t.irn = i.taxonomy_irn)"

Mineralogy:
  description: Museum mineralogical specimens
  sql: "SELECT DISTINCT ON (c.irn) c.irn as _id, c.type,
       s.collection_department, s.collection_sub_department, s.catalogue_number,
       si.continent, si.country, si.state_province, si.county, si.decimal_latitude as latitude, si.decimal_longitude as longitude,
       ce.expedition_name, ce.vessel_name,
       m.identification_as_registered, m.commodity, m.deposit_type,
       me.meteorite_type, me.meteorite_group, me.meteorite_class, me.pet_type,
       (SELECT True FROM {schema}.catalogue_multimedia cm WHERE cm.catalogue_irn = c.irn LIMIT 1) AS multimedia,
       ARRAY_TO_STRING(ARRAY(SELECT DISTINCT(age) FROM {schema}.specimen_mineralogical_age sma INNER JOIN {schema}.mineralogical_age ma ON ma.id = sma.mineralogical_age_id where mineralogy_irn = m.irn), ',') AS mineralogical_age
       FROM {schema}.catalogue c
       INNER JOIN {schema}.specimen s on s.irn = c.irn
       LEFT JOIN {schema}.mineralogy m on m.irn = s.irn
       LEFT JOIN {schema}.meteorite me on me.irn = s.irn
       LEFT JOIN {schema}.site si ON si.irn = s.site_irn
       LEFT JOIN {schema}.collection_event ce ON ce.irn = s.collection_event_irn
       WHERE s.collection_department = 'Mineralogy'
       ORDER BY c.irn"

Palaeontology:
  description: Palaeontological specimens
  sql: "SELECT DISTINCT ON (c.irn) c.irn as _id, c.type,
       s.collection_department, s.collection_sub_department, s.catalogue_number,
       t.scientific_name, t.kingdom, t.phylum, t.taxonomic_class, t.order, t.suborder, t.superfamily, t.family, t.subfamily, t.genus, t.subgenus, t.species, t.subspecies, t.scientific_name_author, t.scientific_name_author_year, t.currently_accepted_name,
       si.continent, si.country, si.state_province, si.county, si.decimal_latitude as latitude, si.decimal_longitude as longitude,
       ce.expedition_name, ce.vessel_name,
       p.catalogue_description,
       st.biozone, st.sedimentology, st.sedimentary_facies,
       (SELECT True FROM {schema}.catalogue_multimedia cm WHERE cm.catalogue_irn = c.irn LIMIT 1) AS multimedia,
       ARRAY_TO_STRING(ARRAY(SELECT DISTINCT(name) FROM {schema}.stratigraphy_stratigraphic_unit ssu INNER JOIN {schema}.stratigraphic_unit su ON su.id = ssu.unit_id where stratigraphy_irn = st.irn), ',') AS stratigraphy
       FROM {schema}.catalogue c
       INNER JOIN {schema}.specimen s on s.irn = c.irn
       INNER JOIN {schema}.palaeontology p on p.irn = s.irn
       LEFT JOIN tmp_determination d ON d.specimen_irn = c.irn
       LEFT JOIN {schema}.taxonomy t ON t.irn = d.taxonomy_irn
       LEFT JOIN {schema}.site si ON si.irn = s.site_irn
       LEFT JOIN {schema}.collection_event ce ON ce.irn = s.collection_event_irn
       LEFT JOIN {schema}.stratigraphy st ON st.irn = p.stratigraphy_irn
       ORDER BY c.irn"

Zoology:
  description: Zoological specimens
  sql: "SELECT DISTINCT ON (c.irn) c.irn as _id, c.type,
       s.collection_department, s.collection_sub_department, s.catalogue_number,
       t.scientific_name, t.kingdom, t.phylum, t.taxonomic_class, t.order, t.suborder, t.superfamily, t.family, t.subfamily, t.genus, t.subgenus, t.species, t.subspecies, t.scientific_name_author, t.scientific_name_author_year, t.currently_accepted_name,
       si.continent, si.country, si.state_province, si.county, si.decimal_latitude as latitude, si.decimal_longitude as longitude,
       ce.expedition_name, ce.vessel_name,
       (SELECT True FROM {schema}.catalogue_multimedia cm WHERE cm.catalogue_irn = c.irn LIMIT 1) AS multimedia,
       p.part_type
       FROM {schema}.catalogue c INNER JOIN {schema}.specimen s on s.irn = c.irn
       LEFT JOIN {schema}.part p ON p.irn = s.irn
       LEFT JOIN {schema}.site si ON si.irn = s.site_irn
       LEFT JOIN {schema}.collection_event ce ON ce.irn = s.collection_event_irn
       LEFT JOIN tmp_determination d ON d.specimen_irn = c.irn
       LEFT JOIN {schema}.taxonomy t ON t.irn = d.taxonomy_irn
       WHERE s.collection_department = 'Zoology'
       ORDER BY c.irn"